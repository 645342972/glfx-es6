{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1be8976cb641dc1b6a57","webpack:///./src/store.js","webpack:///./src/util.js","webpack:///./src/shader.js","webpack:///./src/filters/common.js","webpack:///./src/matrix.js","webpack:///./src/index.js","webpack:///./src/spline.js","webpack:///./src/texture.js","webpack:///./src/filters/index.js","webpack:///./src/filters/adjust/brightnesscontrast.js","webpack:///./src/filters/adjust/curves.js","webpack:///./src/filters/adjust/denoise.js","webpack:///./src/filters/adjust/huesaturation.js","webpack:///./src/filters/adjust/noise.js","webpack:///./src/filters/adjust/sepia.js","webpack:///./src/filters/adjust/unsharpmask.js","webpack:///./src/filters/adjust/vibrance.js","webpack:///./src/filters/adjust/vignette.js","webpack:///./src/filters/blur/lensblur.js","webpack:///./src/filters/blur/tiltshift.js","webpack:///./src/filters/blur/triangleblur.js","webpack:///./src/filters/blur/zoomblur.js","webpack:///./src/filters/fun/colorhalftone.js","webpack:///./src/filters/fun/dotscreen.js","webpack:///./src/filters/fun/edgework.js","webpack:///./src/filters/fun/hexagonalpixelate.js","webpack:///./src/filters/fun/ink.js","webpack:///./src/filters/warp/bulgepinch.js","webpack:///./src/filters/warp/matrixwarp.js","webpack:///./src/filters/warp/perspective.js","webpack:///./src/filters/warp/swirl.js"],"names":["set","get","store","obj","Object","assign","key","simpleShader","clamp","splineInterpolate","shader","uniforms","textureIn","textureOut","_","texture","use","spareTexture","drawTo","drawRect","swapWith","lo","value","hi","Math","max","min","points","interpolator","array","i","push","floor","interpolate","defaultVertexSource","defaultFragmentSource","Shader","gl","defaultShader","vertexSource","fragmentSource","vertexAttribute","texCoordAttribute","program","createProgram","attachShader","compileSource","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","useProgram","name","hasOwnProperty","location","getUniformLocation","isArray","length","uniform1fv","Float32Array","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","isNumber","uniform1f","toString","textures","uniform1i","left","top","right","bottom","viewport","getParameter","VIEWPORT","undefined","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","texCoordBuffer","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","drawArrays","TRIANGLE_STRIP","prototype","call","type","source","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","warpShader","warp","randomShaderFunc","getSquareToQuad","getInverse","multiply","x0","y0","x1","y1","x2","y2","x3","y3","dx1","dy1","dx2","dy2","dx3","dy3","det","a","b","m","c","d","e","f","g","h","filters","wrapTexture","loadContentsOf","element","destroy","fromElement","initialize","width","height","UNSIGNED_BYTE","getExtension","testTexture","RGBA","extraTexture","flippedShader","isInitialized","draw","getDefaultShader","update","replace","node","parentNode","insertBefore","removeChild","contents","getPixelArray","w","Uint8Array","readPixels","wrap","func","apply","arguments","canvas","document","createElement","getContext","premultipliedAlpha","brightnessContrast","hexagonalPixelate","hueSaturation","colorHalftone","triangleBlur","unsharpMask","perspective","matrixWarp","bulgePinch","tiltShift","dotScreen","edgeWork","lensBlur","zoomBlur","noise","denoise","curves","swirl","ink","vignette","vibrance","sepia","SplineInterpolator","n","xa","ya","u","sort","wx","sig","p","ddydx","x","klo","khi","k","Texture","format","id","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","videoWidth","videoHeight","data","deleteTexture","unit","activeTexture","TEXTURE0","callback","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","Error","getCanvas","image","size","pixels","createImageData","putImageData","src","toDataURL","other","temp","clearRect","default","brightness","contrast","red","green","blue","splice","initFromBytes","map","exponent","texSize","hue","saturation","amount","radius","strength","ensureFormat","originalTexture","unuse","angle","lensBlurPrePass","common","lensBlur0","lensBlur1","lensBlur2","texture1","dir","PI","sin","cos","power","pow","delta0","delta1","startX","startY","endX","endY","blurRadius","gradientRadius","dx","dy","sqrt","start","end","delta","centerX","centerY","center","scale","edgeWork1","edgeWork2","matrix","inverse","useTextureSpace","Array","concat","before","after"],"mappings":"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","file":"glfx-es6.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"fx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fx\"] = factory();\n\telse\n\t\troot[\"fx\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1be8976cb641dc1b6a57","let store = {}\n\nexport function set(obj) {\n  store = Object.assign(store, obj)\n}\n\nexport function get(key) {\n  return store[key]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","import SplineInterpolator from './spline'\n\nexport function simpleShader(shader, uniforms, textureIn, textureOut) {\n  (textureIn || this._.texture).use();\n  this._.spareTexture.drawTo(function() {\n    shader.uniforms(uniforms).drawRect();\n  });\n  this._.spareTexture.swapWith(textureOut || this._.texture);\n}\n\nexport function clamp(lo, value, hi) {\n  return Math.max(lo, Math.min(value, hi));\n}\n\nexport function splineInterpolate(points) {\n  var interpolator = new SplineInterpolator(points);\n  var array = [];\n  for (var i = 0; i < 256; i++) {\n    array.push(clamp(0, Math.floor(interpolator.interpolate(i / 255) * 256), 255));\n  }\n  return array;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import * as store from './store'\n\nvar defaultVertexSource = '\\\nattribute vec2 vertex;\\\nattribute vec2 _texCoord;\\\nvarying vec2 texCoord;\\\nvoid main() {\\\n  texCoord = _texCoord;\\\n  gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\\\n}';\n\nvar defaultFragmentSource = '\\\nuniform sampler2D texture;\\\nvarying vec2 texCoord;\\\nvoid main() {\\\n  gl_FragColor = texture2D(texture, texCoord);\\\n}';\n\n    \nexport default class Shader {\n\n  static getDefaultShader() {\n    var gl = store.get('gl')\n    gl.defaultShader = gl.defaultShader || new Shader();\n    return gl.defaultShader;\n  }\n  \n  constructor(vertexSource, fragmentSource) {\n    var gl = store.get('gl')\n    this.vertexAttribute = null;\n    this.texCoordAttribute = null;\n    this.program = gl.createProgram();\n    vertexSource = vertexSource || defaultVertexSource;\n    fragmentSource = fragmentSource || defaultFragmentSource;\n    fragmentSource = 'precision highp float;' + fragmentSource; // annoying requirement is annoying\n    gl.attachShader(this.program, compileSource(gl.VERTEX_SHADER, vertexSource));\n    gl.attachShader(this.program, compileSource(gl.FRAGMENT_SHADER, fragmentSource));\n    gl.linkProgram(this.program);\n    if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n      throw 'link error: ' + gl.getProgramInfoLog(this.program);\n    }\n  }\n  \n  destroy() {\n    var gl = store.get('gl')\n    gl.deleteProgram(this.program);\n    this.program = null;\n  }\n  \n  uniforms(uniforms) {\n    var gl = store.get('gl')\n    gl.useProgram(this.program);\n    for (var name in uniforms) {\n      if (!uniforms.hasOwnProperty(name)) continue;\n      var location = gl.getUniformLocation(this.program, name);\n      if (location === null) continue; // will be null if the uniform isn't used in the shader\n      var value = uniforms[name];\n      if (isArray(value)) {\n        switch (value.length) {\n          case 1: gl.uniform1fv(location, new Float32Array(value)); break;\n          case 2: gl.uniform2fv(location, new Float32Array(value)); break;\n          case 3: gl.uniform3fv(location, new Float32Array(value)); break;\n          case 4: gl.uniform4fv(location, new Float32Array(value)); break;\n          case 9: gl.uniformMatrix3fv(location, false, new Float32Array(value)); break;\n          case 16: gl.uniformMatrix4fv(location, false, new Float32Array(value)); break;\n          default: throw 'dont\\'t know how to load uniform \"' + name + '\" of length ' + value.length;\n        }\n      } else if (isNumber(value)) {\n        gl.uniform1f(location, value);\n      } else {\n        throw 'attempted to set uniform \"' + name + '\" to invalid value ' + (value || 'undefined').toString();\n      }\n    }\n    // allow chaining\n    return this;\n  }\n  \n  // textures are uniforms too but for some reason can't be specified by gl.uniform1f,\n  // even though floating point numbers represent the integers 0 through 7 exactly\n  textures(textures) {\n    var gl = store.get('gl')\n    gl.useProgram(this.program);\n    for (var name in textures) {\n      if (!textures.hasOwnProperty(name)) continue;\n      gl.uniform1i(gl.getUniformLocation(this.program, name), textures[name]);\n    }\n    // allow chaining\n    return this;\n  }\n  \n  drawRect(left, top, right, bottom) {\n    var gl = store.get('gl')\n    var viewport = gl.getParameter(gl.VIEWPORT);\n    top = top !== undefined ? (top - viewport[1]) / viewport[3] : 0;\n    left = left !== undefined ? (left - viewport[0]) / viewport[2] : 0;\n    right = right !== undefined ? (right - viewport[0]) / viewport[2] : 1;\n    bottom = bottom !== undefined ? (bottom - viewport[1]) / viewport[3] : 1;\n    if (gl.vertexBuffer == null) {\n      gl.vertexBuffer = gl.createBuffer();\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([ left, top, left, bottom, right, top, right, bottom ]), gl.STATIC_DRAW);\n    if (gl.texCoordBuffer == null) {\n      gl.texCoordBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([ 0, 0, 0, 1, 1, 0, 1, 1 ]), gl.STATIC_DRAW);\n    }\n    if (this.vertexAttribute == null) {\n      this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n      gl.enableVertexAttribArray(this.vertexAttribute);\n    }\n    if (this.texCoordAttribute == null) {\n      this.texCoordAttribute = gl.getAttribLocation(this.program, '_texCoord');\n      gl.enableVertexAttribArray(this.texCoordAttribute);\n    }\n    gl.useProgram(this.program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n    gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n    gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, false, 0, 0);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n  \n}\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) == '[object Array]';\n}\n\nfunction isNumber(obj) {\n  return Object.prototype.toString.call(obj) == '[object Number]';\n}\n\nfunction compileSource(type, source) {\n  var gl = store.get('gl')\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw 'compile error: ' + gl.getShaderInfoLog(shader);\n  }\n  return shader;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shader.js","import Shader from '../shader'\n\nexport function warpShader(uniforms, warp) {\n  return new Shader(null, uniforms + '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec2 coord = texCoord * texSize;\\\n      ' + warp + '\\\n      gl_FragColor = texture2D(texture, coord / texSize);\\\n      vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\\\n      if (coord != clampedCoord) {\\\n        /* fade to transparent if we are outside the image */\\\n        gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));\\\n      }\\\n    }'\n  );\n}\n\n// returns a random number between 0 and 1\nexport const randomShaderFunc = '\\\n  float random(vec3 scale, float seed) {\\\n    /* use the fragment position for a different seed per-pixel */\\\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\\n  }\\\n';\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/common.js","// from javax.media.jai.PerspectiveTransform\n\nexport function getSquareToQuad(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var dx1 = x1 - x2;\n  var dy1 = y1 - y2;\n  var dx2 = x3 - x2;\n  var dy2 = y3 - y2;\n  var dx3 = x0 - x1 + x2 - x3;\n  var dy3 = y0 - y1 + y2 - y3;\n  var det = dx1*dy2 - dx2*dy1;\n  var a = (dx3*dy2 - dx2*dy3) / det;\n  var b = (dx1*dy3 - dx3*dy1) / det;\n  return [\n    x1 - x0 + a*x1, y1 - y0 + a*y1, a,\n    x3 - x0 + b*x3, y3 - y0 + b*y3, b,\n    x0, y0, 1\n  ];\n}\n\nexport function getInverse(m) {\n  var a = m[0], b = m[1], c = m[2];\n  var d = m[3], e = m[4], f = m[5];\n  var g = m[6], h = m[7], i = m[8];\n  var det = a*e*i - a*f*h - b*d*i + b*f*g + c*d*h - c*e*g;\n  return [\n    (e*i - f*h) / det, (c*h - b*i) / det, (b*f - c*e) / det,\n    (f*g - d*i) / det, (a*i - c*g) / det, (c*d - a*f) / det,\n    (d*h - e*g) / det, (b*g - a*h) / det, (a*e - b*d) / det\n  ];\n}\n\nexport function multiply(a, b) {\n  return [\n    a[0]*b[0] + a[1]*b[3] + a[2]*b[6],\n    a[0]*b[1] + a[1]*b[4] + a[2]*b[7],\n    a[0]*b[2] + a[1]*b[5] + a[2]*b[8],\n    a[3]*b[0] + a[4]*b[3] + a[5]*b[6],\n    a[3]*b[1] + a[4]*b[4] + a[5]*b[7],\n    a[3]*b[2] + a[4]*b[5] + a[5]*b[8],\n    a[6]*b[0] + a[7]*b[3] + a[8]*b[6],\n    a[6]*b[1] + a[7]*b[4] + a[8]*b[7],\n    a[6]*b[2] + a[7]*b[5] + a[8]*b[8]\n  ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/matrix.js","import * as store from './store'\nimport Texture from './texture'\nimport Shader from './shader'\nimport * as filters from './filters'\nexport {splineInterpolate} from './util'\n\nfunction wrapTexture(texture) {\n  return {\n    _: texture,\n    loadContentsOf: function(element) {\n      // Make sure that we're using the correct global WebGL context\n      store.set({gl: this._.gl});\n      this._.loadContentsOf(element);\n    },\n    destroy: function() {\n      // Make sure that we're using the correct global WebGL context\n      store.set({gl: this._.gl});\n      this._.destroy();\n    }\n  };\n}\n\nfunction texture(element) {\n  return wrapTexture(Texture.fromElement(element));\n}\n\nfunction initialize(width, height) {\n  var gl = store.get('gl')\n  var type = gl.UNSIGNED_BYTE;\n\n  // Go for floating point buffer textures if we can, it'll make the bokeh\n  // filter look a lot better. Note that on Windows, ANGLE does not let you\n  // render to a floating-point texture when linear filtering is enabled.\n  // See http://crbug.com/172278 for more information.\n  if (gl.getExtension('OES_texture_float') && gl.getExtension('OES_texture_float_linear')) {\n    var testTexture = new Texture(100, 100, gl.RGBA, gl.FLOAT);\n    try {\n      // Only use gl.FLOAT if we can render to it\n      testTexture.drawTo(function() { type = gl.FLOAT; });\n    } catch (e) {}\n    testTexture.destroy();\n  }\n\n  if (this._.texture) this._.texture.destroy();\n  if (this._.spareTexture) this._.spareTexture.destroy();\n  this.width = width;\n  this.height = height;\n  this._.texture = new Texture(width, height, gl.RGBA, type);\n  this._.spareTexture = new Texture(width, height, gl.RGBA, type);\n  this._.extraTexture = this._.extraTexture || new Texture(0, 0, gl.RGBA, type);\n  this._.flippedShader = this._.flippedShader || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\\\n    }\\\n  ');\n  this._.isInitialized = true;\n}\n\n/*\n   Draw a texture to the canvas, with an optional width and height to scale to.\n   If no width and height are given then the original texture width and height\n   are used.\n*/\nfunction draw(texture, width, height) {\n  if (!this._.isInitialized || texture._.width != this.width || texture._.height != this.height) {\n    initialize.call(this, width ? width : texture._.width, height ? height : texture._.height);\n  }\n\n  texture._.use();\n  this._.texture.drawTo(function() {\n    Shader.getDefaultShader().drawRect();\n  });\n\n  return this;\n}\n\nfunction update() {\n  this._.texture.use();\n  this._.flippedShader.drawRect();\n  return this;\n}\n\nfunction replace(node) {\n  node.parentNode.insertBefore(this, node);\n  node.parentNode.removeChild(node);\n  return this;\n}\n\nfunction contents() {\n  var gl = store.get('gl')\n  var texture = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);\n  this._.texture.use();\n  texture.drawTo(function() {\n    Shader.getDefaultShader().drawRect();\n  });\n  return wrapTexture(texture);\n}\n\n/*\n   Get a Uint8 array of pixel values: [r, g, b, a, r, g, b, a, ...]\n   Length of the array will be width * height * 4.\n*/\nfunction getPixelArray() {\n  var gl = store.get('gl')\n  var w = this._.texture.width;\n  var h = this._.texture.height;\n  var array = new Uint8Array(w * h * 4);\n  this._.texture.drawTo(function() {\n    gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, array);\n  });\n  return array;\n}\n\nfunction wrap(func) {\n  return function() {\n    // Make sure that we're using the correct global WebGL context\n    store.set({gl: this._.gl});\n\n    // Now that the context has been switched, we can call the wrapped function\n    return func.apply(this, arguments);\n  };\n}\n\nexport const canvas = function() {\n  var canvas = document.createElement('canvas');\n  try {\n    store.set({gl: canvas.getContext('experimental-webgl', { premultipliedAlpha: false })});\n  } catch (e) {\n    store.set({gl: null});\n  }\n  var gl = store.get('gl')\n  if (!gl) {\n    throw 'This browser does not support WebGL';\n  }\n  canvas._ = {\n      gl: gl,\n      isInitialized: false,\n      texture: null,\n      spareTexture: null,\n      flippedShader: null\n  };\n\n  // Core methods\n  canvas.texture = wrap(texture);\n  canvas.draw = wrap(draw);\n  canvas.update = wrap(update);\n  canvas.replace = wrap(replace);\n  canvas.contents = wrap(contents);\n  canvas.getPixelArray = wrap(getPixelArray);\n  \n  // // Filter methods\n  canvas.brightnessContrast = wrap(filters.brightnessContrast);\n  canvas.hexagonalPixelate = wrap(filters.hexagonalPixelate);\n  canvas.hueSaturation = wrap(filters.hueSaturation);\n  canvas.colorHalftone = wrap(filters.colorHalftone);\n  canvas.triangleBlur = wrap(filters.triangleBlur);\n  canvas.unsharpMask = wrap(filters.unsharpMask);\n  canvas.perspective = wrap(filters.perspective);\n  canvas.matrixWarp = wrap(filters.matrixWarp);\n  canvas.bulgePinch = wrap(filters.bulgePinch);\n  canvas.tiltShift = wrap(filters.tiltShift);\n  canvas.dotScreen = wrap(filters.dotScreen);\n  canvas.edgeWork = wrap(filters.edgeWork);\n  canvas.lensBlur = wrap(filters.lensBlur);\n  canvas.zoomBlur = wrap(filters.zoomBlur);\n  canvas.noise = wrap(filters.noise);\n  canvas.denoise = wrap(filters.denoise);\n  canvas.curves = wrap(filters.curves);\n  canvas.swirl = wrap(filters.swirl);\n  canvas.ink = wrap(filters.ink);\n  canvas.vignette = wrap(filters.vignette);\n  canvas.vibrance = wrap(filters.vibrance);\n  canvas.sepia = wrap(filters.sepia);\n\n  return canvas;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// from SplineInterpolator.cs in the Paint.NET source code\n\nexport default class SplineInterpolator {\n  \n  constructor(points) {\n    var n = points.length;\n    this.xa = [];\n    this.ya = [];\n    this.u = [];\n    this.y2 = [];\n\n    points.sort(function(a, b) {\n      return a[0] - b[0];\n    });\n    for (var i = 0; i < n; i++) {\n      this.xa.push(points[i][0]);\n      this.ya.push(points[i][1]);\n    }\n\n    this.u[0] = 0;\n    this.y2[0] = 0;\n\n    for (var i = 1; i < n - 1; ++i) {\n      // This is the decomposition loop of the tridiagonal algorithm.\n      // y2 and u are used for temporary storage of the decomposed factors.\n      var wx = this.xa[i + 1] - this.xa[i - 1];\n      var sig = (this.xa[i] - this.xa[i - 1]) / wx;\n      var p = sig * this.y2[i - 1] + 2.0;\n\n      this.y2[i] = (sig - 1.0) / p;\n\n      var ddydx =\n          (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) -\n          (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n      this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n    }\n\n    this.y2[n - 1] = 0;\n\n    // This is the backsubstitution loop of the tridiagonal algorithm\n    for (var i = n - 2; i >= 0; --i) {\n      this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n    }\n  }\n  \n  interpolate(x) {\n    var n = this.ya.length;\n    var klo = 0;\n    var khi = n - 1;\n\n    // We will find the right place in the table by means of\n    // bisection. This is optimal if sequential calls to this\n    // routine are at random values of x. If sequential calls\n    // are in order, and closely spaced, one would do better\n    // to store previous values of klo and khi.\n    while (khi - klo > 1) {\n      var k = (khi + klo) >> 1;\n\n      if (this.xa[k] > x) {\n        khi = k;\n      } else {\n        klo = k;\n      }\n    }\n\n    var h = this.xa[khi] - this.xa[klo];\n    var a = (this.xa[khi] - x) / h;\n    var b = (x - this.xa[klo]) / h;\n\n    // Cubic spline polynomial is now evaluated.\n    return a * this.ya[klo] + b * this.ya[khi] +\n      ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spline.js","import * as store from './store'\nimport Shader from './shader'\n\nvar canvas = null;\n\nexport default class Texture {\n  \n  static fromElement(element) {\n    var gl = store.get('gl')\n    var texture = new Texture(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);\n    texture.loadContentsOf(element);\n    return texture;\n  }\n  \n  constructor(width, height, format, type) {\n    var gl = store.get('gl')\n    this.gl = gl;\n    this.id = gl.createTexture();\n    this.width = width;\n    this.height = height;\n    this.format = format;\n    this.type = type;\n\n    gl.bindTexture(gl.TEXTURE_2D, this.id);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    if (width && height) gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n  }\n  \n  loadContentsOf(element) {\n    var gl = store.get('gl')\n    this.width = element.width || element.videoWidth;\n    this.height = element.height || element.videoHeight;\n    gl.bindTexture(gl.TEXTURE_2D, this.id);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, element);\n  }\n  \n  initFromBytes(width, height, data) {\n    var gl = store.get('gl')\n    this.width = width;\n    this.height = height;\n    this.format = gl.RGBA;\n    this.type = gl.UNSIGNED_BYTE;\n    gl.bindTexture(gl.TEXTURE_2D, this.id);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, this.type, new Uint8Array(data));\n  }\n  \n  destroy() {\n    var gl = store.get('gl')\n    gl.deleteTexture(this.id);\n    this.id = null;\n  }\n  \n  use(unit) {\n    var gl = store.get('gl')\n    gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n    gl.bindTexture(gl.TEXTURE_2D, this.id);\n  }\n  \n  unuse(unit) {\n    var gl = store.get('gl')\n    gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n  \n  ensureFormat(width, height, format, type) {\n    // allow passing an existing texture instead of individual arguments\n    if (arguments.length == 1) {\n      var texture = arguments[0];\n      width = texture.width;\n      height = texture.height;\n      format = texture.format;\n      type = texture.type;\n    }\n\n    // change the format only if required\n    if (width != this.width || height != this.height || format != this.format || type != this.type) {\n      var gl = store.get('gl')\n      this.width = width;\n      this.height = height;\n      this.format = format;\n      this.type = type;\n      gl.bindTexture(gl.TEXTURE_2D, this.id);\n      gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n    }\n  }\n  \n  drawTo(callback) {\n    var gl = store.get('gl')\n    // start rendering to this texture\n    gl.framebuffer = gl.framebuffer || gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);\n    if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n        throw new Error('incomplete framebuffer');\n    }\n    gl.viewport(0, 0, this.width, this.height);\n\n    // do the drawing\n    callback();\n\n    // stop rendering to this texture\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  \n  fillUsingCanvas(callback) {\n    callback(getCanvas(this));\n    var gl = store.get('gl')\n    this.format = gl.RGBA;\n    this.type = gl.UNSIGNED_BYTE;\n    gl.bindTexture(gl.TEXTURE_2D, this.id);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n    return this;\n  }\n\n  toImage(image) {\n    this.use();\n    Shader.getDefaultShader().drawRect();\n    var gl = store.get('gl')\n    var size = this.width * this.height * 4;\n    var pixels = new Uint8Array(size);\n    var c = getCanvas(this);\n    var data = c.createImageData(this.width, this.height);\n    gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    for (var i = 0; i < size; i++) {\n        data.data[i] = pixels[i];\n    }\n    c.putImageData(data, 0, 0);\n    image.src = canvas.toDataURL();\n  }\n\n  swapWith(other) {\n    var temp;\n    temp = other.id; other.id = this.id; this.id = temp;\n    temp = other.width; other.width = this.width; this.width = temp;\n    temp = other.height; other.height = this.height; this.height = temp;\n    temp = other.format; other.format = this.format; this.format = temp;\n  }\n}\n\nfunction getCanvas(texture) {\n  if (canvas == null) canvas = document.createElement('canvas');\n  canvas.width = texture.width;\n  canvas.height = texture.height;\n  var c = canvas.getContext('2d');\n  c.clearRect(0, 0, canvas.width, canvas.height);\n  return c;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/texture.js","export {default as brightnessContrast} from './adjust/brightnesscontrast'\nexport {default as curves} from './adjust/curves'\nexport {default as denoise} from './adjust/denoise'\nexport {default as hueSaturation} from './adjust/huesaturation'\nexport {default as noise} from './adjust/noise'\nexport {default as sepia} from './adjust/sepia'\nexport {default as unsharpMask} from './adjust/unsharpmask'\nexport {default as vibrance} from './adjust/vibrance'\nexport {default as vignette} from './adjust/vignette'\n\nexport {default as lensBlur} from './blur/lensblur'\nexport {default as tiltShift} from './blur/tiltshift'\nexport {default as triangleBlur} from './blur/triangleblur'\nexport {default as zoomBlur} from './blur/zoomblur'\n\nexport {default as colorHalftone} from './fun/colorhalftone'\nexport {default as dotScreen} from './fun/dotscreen'\nexport {default as edgeWork} from './fun/edgework'\nexport {default as hexagonalPixelate} from './fun/hexagonalpixelate'\nexport {default as ink} from './fun/ink'\n\nexport {default as bulgePinch} from './warp/bulgepinch'\nexport {default as matrixWarp} from './warp/matrixwarp'\nexport {default as perspective} from './warp/perspective'\nexport {default as swirl} from './warp/swirl'\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/index.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter           Brightness / Contrast\n * @description      Provides additive brightness and multiplicative contrast control.\n * @param brightness -1 to 1 (-1 is solid black, 0 is no change, and 1 is solid white)\n * @param contrast   -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n */\nexport default function(brightness, contrast) {\n  var gl = store.get('gl')\n  gl.brightnessContrast = gl.brightnessContrast || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float brightness;\\\n    uniform float contrast;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      color.rgb += brightness;\\\n      if (contrast > 0.0) {\\\n        color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\\\n      } else {\\\n        color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\\\n      }\\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.brightnessContrast, {\n    brightness: clamp(-1, brightness, 1),\n    contrast: clamp(-1, contrast, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/brightnesscontrast.js","import Shader from '../../shader'\nimport {simpleShader, clamp, splineInterpolate} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter      Curves\n * @description A powerful mapping tool that transforms the colors in the image\n *              by an arbitrary function. The function is interpolated between\n *              a set of 2D points using splines. The curves filter can take\n *              either one or three arguments which will apply the mapping to\n *              either luminance or RGB values, respectively.\n * @param red   A list of points that define the function for the red channel.\n *              Each point is a list of two values: the value before the mapping\n *              and the value after the mapping, both in the range 0 to 1. For\n *              example, [[0,1], [1,0]] would invert the red channel while\n *              [[0,0], [1,1]] would leave the red channel unchanged. If green\n *              and blue are omitted then this argument also applies to the\n *              green and blue channels.\n * @param green (optional) A list of points that define the function for the green\n *              channel (just like for red).\n * @param blue  (optional) A list of points that define the function for the blue\n *              channel (just like for red).\n */\nexport default function(red, green, blue) {\n  var gl = store.get('gl')\n  // Create the ramp texture\n  red = splineInterpolate(red);\n  if (arguments.length == 1) {\n    green = blue = red;\n  } else {\n    green = splineInterpolate(green);\n    blue = splineInterpolate(blue);\n  }\n  var array = [];\n  for (var i = 0; i < 256; i++) {\n    array.splice(array.length, 0, red[i], green[i], blue[i], 255);\n  }\n  this._.extraTexture.initFromBytes(256, 1, array);\n  this._.extraTexture.use(1);\n\n  gl.curves = gl.curves || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform sampler2D map;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      color.r = texture2D(map, vec2(color.r)).r;\\\n      color.g = texture2D(map, vec2(color.g)).g;\\\n      color.b = texture2D(map, vec2(color.b)).b;\\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  gl.curves.textures({\n    map: 1\n  });\n  simpleShader.call(this, gl.curves, {});\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/curves.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Denoise\n * @description    Smooths over grainy noise in dark images using an 9x9 box filter\n *                 weighted by color intensity, similar to a bilateral filter.\n * @param exponent The exponent of the color intensity difference, should be greater\n *                 than zero. A value of zero just gives an 9x9 box blur and high values\n *                 give the original image, but ideal values are usually around 10-20.\n */\nexport default function(exponent) {\n  var gl = store.get('gl')\n  // Do a 9x9 bilateral box filter\n  gl.denoise = gl.denoise || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float exponent;\\\n    uniform float strength;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 center = texture2D(texture, texCoord);\\\n      vec4 color = vec4(0.0);\\\n      float total = 0.0;\\\n      for (float x = -4.0; x <= 4.0; x += 1.0) {\\\n        for (float y = -4.0; y <= 4.0; y += 1.0) {\\\n          vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\\\n          float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\\\n          weight = pow(weight, exponent);\\\n          color += sample * weight;\\\n          total += weight;\\\n        }\\\n      }\\\n      gl_FragColor = color / total;\\\n    }\\\n  ');\n\n  // Perform two iterations for stronger results\n  for (var i = 0; i < 2; i++) {\n    simpleShader.call(this, gl.denoise, {\n      exponent: Math.max(0, exponent),\n      texSize: [this.width, this.height]\n    });\n  }\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/denoise.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter           Hue / Saturation\n * @description      Provides rotational hue and multiplicative saturation control. RGB color space\n *                   can be imagined as a cube where the axes are the red, green, and blue color\n *                   values. Hue changing works by rotating the color vector around the grayscale\n *                   line, which is the straight line from black (0, 0, 0) to white (1, 1, 1).\n *                   Saturation is implemented by scaling all color channel values either toward\n *                   or away from the average color channel value.\n * @param hue        -1 to 1 (-1 is 180 degree rotation in the negative direction, 0 is no change,\n *                   and 1 is 180 degree rotation in the positive direction)\n * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n */\nexport default function(hue, saturation) {\n  var gl = store.get('gl')\n  gl.hueSaturation = gl.hueSaturation || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float hue;\\\n    uniform float saturation;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      \\\n      /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\\\n      float angle = hue * 3.14159265;\\\n      float s = sin(angle), c = cos(angle);\\\n      vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\\n      float len = length(color.rgb);\\\n      color.rgb = vec3(\\\n        dot(color.rgb, weights.xyz),\\\n        dot(color.rgb, weights.zxy),\\\n        dot(color.rgb, weights.yzx)\\\n      );\\\n      \\\n      /* saturation adjustment */\\\n      float average = (color.r + color.g + color.b) / 3.0;\\\n      if (saturation > 0.0) {\\\n        color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\\\n      } else {\\\n        color.rgb += (average - color.rgb) * (-saturation);\\\n      }\\\n      \\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.hueSaturation, {\n    hue: clamp(-1, hue, 1),\n    saturation: clamp(-1, saturation, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/huesaturation.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Noise\n * @description    Adds black and white noise to the image.\n * @param amount   0 to 1 (0 for no effect, 1 for maximum noise)\n */\nexport default function(amount) {\n  var gl = store.get('gl')\n  gl.noise = gl.noise || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float amount;\\\n    varying vec2 texCoord;\\\n    float rand(vec2 co) {\\\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\\n    }\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      \\\n      float diff = (rand(texCoord) - 0.5) * amount;\\\n      color.r += diff;\\\n      color.g += diff;\\\n      color.b += diff;\\\n      \\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.noise, {\n    amount: clamp(0, amount, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/noise.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Sepia\n * @description    Gives the image a reddish-brown monochrome tint that imitates an old photograph.\n * @param amount   0 to 1 (0 for no effect, 1 for full sepia coloring)\n */\nexport default function(amount) {\n  var gl = store.get('gl')\n  gl.sepia = gl.sepia || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float amount;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      float r = color.r;\\\n      float g = color.g;\\\n      float b = color.b;\\\n      \\\n      color.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\\\n      color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\\\n      color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\\\n      \\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.sepia, {\n    amount: clamp(0, amount, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/sepia.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Unsharp Mask\n * @description    A form of image sharpening that amplifies high-frequencies in the image. It\n *                 is implemented by scaling pixels away from the average of their neighbors.\n * @param radius   The blur radius that calculates the average of the neighboring pixels.\n * @param strength A scale factor where 0 is no effect and higher values cause a stronger effect.\n */\nexport default function(radius, strength) {\n  var gl = store.get('gl')\n  gl.unsharpMask = gl.unsharpMask || new Shader(null, '\\\n    uniform sampler2D blurredTexture;\\\n    uniform sampler2D originalTexture;\\\n    uniform float strength;\\\n    uniform float threshold;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 blurred = texture2D(blurredTexture, texCoord);\\\n      vec4 original = texture2D(originalTexture, texCoord);\\\n      gl_FragColor = mix(blurred, original, 1.0 + strength);\\\n    }\\\n  ');\n\n  // Store a copy of the current texture in the second texture unit\n  this._.extraTexture.ensureFormat(this._.texture);\n  this._.texture.use();\n  this._.extraTexture.drawTo(function() {\n    Shader.getDefaultShader().drawRect();\n  });\n\n  // Blur the current texture, then use the stored texture to detect edges\n  this._.extraTexture.use(1);\n  this.triangleBlur(radius);\n  gl.unsharpMask.textures({\n    originalTexture: 1\n  });\n  simpleShader.call(this, gl.unsharpMask, {\n    strength: strength\n  });\n  this._.extraTexture.unuse(1);\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/unsharpmask.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter       Vibrance\n * @description  Modifies the saturation of desaturated colors, leaving saturated colors unmodified.\n * @param amount -1 to 1 (-1 is minimum vibrance, 0 is no change, and 1 is maximum vibrance)\n */\nexport default function(amount) {\n  var gl = store.get('gl')\n  gl.vibrance = gl.vibrance || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float amount;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      float average = (color.r + color.g + color.b) / 3.0;\\\n      float mx = max(color.r, max(color.g, color.b));\\\n      float amt = (mx - average) * (-amount * 3.0);\\\n      color.rgb = mix(color.rgb, vec3(mx), amt);\\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.vibrance, {\n    amount: clamp(-1, amount, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/vibrance.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Vignette\n * @description    Adds a simulated lens edge darkening effect.\n * @param size     0 to 1 (0 for center of frame, 1 for edge of frame)\n * @param amount   0 to 1 (0 for no effect, 1 for maximum lens darkening)\n */\nexport default function(size, amount) {\n  var gl = store.get('gl')\n  gl.vignette = gl.vignette || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float size;\\\n    uniform float amount;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      \\\n      float dist = distance(texCoord, vec2(0.5, 0.5));\\\n      color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));\\\n      \\\n      gl_FragColor = color;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.vignette, {\n    size: clamp(0, size, 1),\n    amount: clamp(0, amount, 1)\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/adjust/vignette.js","import Shader from '../../shader'\nimport {simpleShader, clamp} from '../../util'\nimport {randomShaderFunc} from '../common'\nimport * as store from '../../store'\n\n/**\n * @filter           Lens Blur\n * @description      Imitates a camera capturing the image out of focus by using a blur that generates\n *                   the large shapes known as bokeh. The polygonal shape of real bokeh is due to the\n *                   blades of the aperture diaphragm when it isn't fully open. This blur renders\n *                   bokeh from a 6-bladed diaphragm because the computation is more efficient. It\n *                   can be separated into three rhombi, each of which is just a skewed box blur.\n *                   This filter makes use of the floating point texture WebGL extension to implement\n *                   the brightness parameter, so there will be severe visual artifacts if brightness\n *                   is non-zero and the floating point texture extension is not available. The\n *                   idea was from John White's SIGGRAPH 2011 talk but this effect has an additional\n *                   brightness parameter that fakes what would otherwise come from a HDR source.\n * @param radius     the radius of the hexagonal disk convolved with the image\n * @param brightness -1 to 1 (the brightness of the bokeh, negative values will create dark bokeh)\n * @param angle      the rotation of the bokeh in radians\n */\nexport default function(radius, brightness, angle) {\n  var gl = store.get('gl')\n  // All averaging is done on values raised to a power to make more obvious bokeh\n  // (we will raise the average to the inverse power at the end to compensate).\n  // Without this the image looks almost like a normal blurred image. This hack is\n  // obviously not realistic, but to accurately simulate this we would need a high\n  // dynamic range source photograph which we don't have.\n  gl.lensBlurPrePass = gl.lensBlurPrePass || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float power;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      color = pow(color, vec4(power));\\\n      gl_FragColor = vec4(color);\\\n    }\\\n  ');\n\n  var common = '\\\n    uniform sampler2D texture0;\\\n    uniform sampler2D texture1;\\\n    uniform vec2 delta0;\\\n    uniform vec2 delta1;\\\n    uniform float power;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    vec4 sample(vec2 delta) {\\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(delta, 151.7182), 0.0);\\\n      \\\n      vec4 color = vec4(0.0);\\\n      float total = 0.0;\\\n      for (float t = 0.0; t <= 30.0; t++) {\\\n        float percent = (t + offset) / 30.0;\\\n        color += texture2D(texture0, texCoord + delta * percent);\\\n        total += 1.0;\\\n      }\\\n      return color / total;\\\n    }\\\n  ';\n\n  gl.lensBlur0 = gl.lensBlur0 || new Shader(null, common + '\\\n    void main() {\\\n      gl_FragColor = sample(delta0);\\\n    }\\\n  ');\n  gl.lensBlur1 = gl.lensBlur1 || new Shader(null, common + '\\\n    void main() {\\\n      gl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\\\n    }\\\n  ');\n  gl.lensBlur2 = gl.lensBlur2 || new Shader(null, common + '\\\n    void main() {\\\n      vec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\\\n      gl_FragColor = pow(color, vec4(power));\\\n    }\\\n  ').textures({ texture1: 1 });\n\n  // Generate\n  var dir = [];\n  for (var i = 0; i < 3; i++) {\n    var a = angle + i * Math.PI * 2 / 3;\n    dir.push([radius * Math.sin(a) / this.width, radius * Math.cos(a) / this.height]);\n  }\n  var power = Math.pow(10, clamp(-1, brightness, 1));\n\n  // Remap the texture values, which will help make the bokeh effect\n  simpleShader.call(this, gl.lensBlurPrePass, {\n    power: power\n  });\n\n  // Blur two rhombi in parallel into extraTexture\n  this._.extraTexture.ensureFormat(this._.texture);\n  simpleShader.call(this, gl.lensBlur0, {\n    delta0: dir[0]\n  }, this._.texture, this._.extraTexture);\n  simpleShader.call(this, gl.lensBlur1, {\n    delta0: dir[1],\n    delta1: dir[2]\n  }, this._.extraTexture, this._.extraTexture);\n\n  // Blur the last rhombus and combine with extraTexture\n  simpleShader.call(this, gl.lensBlur0, {\n    delta0: dir[1]\n  });\n  this._.extraTexture.use(1);\n  simpleShader.call(this, gl.lensBlur2, {\n    power: 1 / power,\n    delta0: dir[2]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/blur/lensblur.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport {randomShaderFunc} from '../common'\nimport * as store from '../../store'\n\n/**\n * @filter               Tilt Shift\n * @description          Simulates the shallow depth of field normally encountered in close-up\n *                       photography, which makes the scene seem much smaller than it actually\n *                       is. This filter assumes the scene is relatively planar, in which case\n *                       the part of the scene that is completely in focus can be described by\n *                       a line (the intersection of the focal plane and the scene). An example\n *                       of a planar scene might be looking at a road from above at a downward\n *                       angle. The image is then blurred with a blur radius that starts at zero\n *                       on the line and increases further from the line.\n * @param startX         The x coordinate of the start of the line segment.\n * @param startY         The y coordinate of the start of the line segment.\n * @param endX           The x coordinate of the end of the line segment.\n * @param endY           The y coordinate of the end of the line segment.\n * @param blurRadius     The maximum radius of the pyramid blur.\n * @param gradientRadius The distance from the line at which the maximum blur radius is reached.\n */\nexport default function(startX, startY, endX, endY, blurRadius, gradientRadius) {\n  var gl = store.get('gl')\n  gl.tiltShift = gl.tiltShift || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float blurRadius;\\\n    uniform float gradientRadius;\\\n    uniform vec2 start;\\\n    uniform vec2 end;\\\n    uniform vec2 delta;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    void main() {\\\n      vec4 color = vec4(0.0);\\\n      float total = 0.0;\\\n      \\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n      \\\n      vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\\\n      float radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\\\n      for (float t = -30.0; t <= 30.0; t++) {\\\n        float percent = (t + offset - 0.5) / 30.0;\\\n        float weight = 1.0 - abs(percent);\\\n        vec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\\\n        \\\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n        sample.rgb *= sample.a;\\\n        \\\n        color += sample * weight;\\\n        total += weight;\\\n      }\\\n      \\\n      gl_FragColor = color / total;\\\n      \\\n      /* switch back from pre-multiplied alpha */\\\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n    }\\\n  ');\n\n  var dx = endX - startX;\n  var dy = endY - startY;\n  var d = Math.sqrt(dx * dx + dy * dy);\n  simpleShader.call(this, gl.tiltShift, {\n    blurRadius: blurRadius,\n    gradientRadius: gradientRadius,\n    start: [startX, startY],\n    end: [endX, endY],\n    delta: [dx / d, dy / d],\n    texSize: [this.width, this.height]\n  });\n  simpleShader.call(this, gl.tiltShift, {\n    blurRadius: blurRadius,\n    gradientRadius: gradientRadius,\n    start: [startX, startY],\n    end: [endX, endY],\n    delta: [-dy / d, dx / d],\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/blur/tiltshift.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport {randomShaderFunc} from '../common'\nimport * as store from '../../store'\n\n/**\n * @filter       Triangle Blur\n * @description  This is the most basic blur filter, which convolves the image with a\n *               pyramid filter. The pyramid filter is separable and is applied as two\n *               perpendicular triangle filters.\n * @param radius The radius of the pyramid convolved with the image.\n */\nexport default function(radius) {\n  var gl = store.get('gl')\n  gl.triangleBlur = gl.triangleBlur || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 delta;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    void main() {\\\n      vec4 color = vec4(0.0);\\\n      float total = 0.0;\\\n      \\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n      \\\n      for (float t = -30.0; t <= 30.0; t++) {\\\n        float percent = (t + offset - 0.5) / 30.0;\\\n        float weight = 1.0 - abs(percent);\\\n        vec4 sample = texture2D(texture, texCoord + delta * percent);\\\n        \\\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n        sample.rgb *= sample.a;\\\n        \\\n        color += sample * weight;\\\n        total += weight;\\\n      }\\\n      \\\n      gl_FragColor = color / total;\\\n      \\\n      /* switch back from pre-multiplied alpha */\\\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.triangleBlur, {\n    delta: [radius / this.width, 0]\n  });\n  simpleShader.call(this, gl.triangleBlur, {\n    delta: [0, radius / this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/blur/triangleblur.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport {randomShaderFunc} from '../common'\nimport * as store from '../../store'\n\n/**\n * @filter         Zoom Blur\n * @description    Blurs the image away from a certain point, which looks like radial motion blur.\n * @param centerX  The x coordinate of the blur origin.\n * @param centerY  The y coordinate of the blur origin.\n * @param strength The strength of the blur. Values in the range 0 to 1 are usually sufficient,\n *                 where 0 doesn't change the image and 1 creates a highly blurred image.\n */\nexport default function(centerX, centerY, strength) {\n  var gl = store.get('gl')\n  gl.zoomBlur = gl.zoomBlur || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 center;\\\n    uniform float strength;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    void main() {\\\n      vec4 color = vec4(0.0);\\\n      float total = 0.0;\\\n      vec2 toCenter = center - texCoord * texSize;\\\n      \\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n      \\\n      for (float t = 0.0; t <= 40.0; t++) {\\\n        float percent = (t + offset) / 40.0;\\\n        float weight = 4.0 * (percent - percent * percent);\\\n        vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\\\n        \\\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n        sample.rgb *= sample.a;\\\n        \\\n        color += sample * weight;\\\n        total += weight;\\\n      }\\\n      \\\n      gl_FragColor = color / total;\\\n      \\\n      /* switch back from pre-multiplied alpha */\\\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.zoomBlur, {\n    center: [centerX, centerY],\n    strength: strength,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/blur/zoomblur.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter        Color Halftone\n * @description   Simulates a CMYK halftone rendering of the image by multiplying pixel values\n *                with a four rotated 2D sine wave patterns, one each for cyan, magenta, yellow,\n *                and black.\n * @param centerX The x coordinate of the pattern origin.\n * @param centerY The y coordinate of the pattern origin.\n * @param angle   The rotation of the pattern in radians.\n * @param size    The diameter of a dot in pixels.\n */\nexport default function(centerX, centerY, angle, size) {\n  var gl = store.get('gl')\n  gl.colorHalftone = gl.colorHalftone || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 center;\\\n    uniform float angle;\\\n    uniform float scale;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    float pattern(float angle) {\\\n      float s = sin(angle), c = cos(angle);\\\n      vec2 tex = texCoord * texSize - center;\\\n      vec2 point = vec2(\\\n        c * tex.x - s * tex.y,\\\n        s * tex.x + c * tex.y\\\n      ) * scale;\\\n      return (sin(point.x) * sin(point.y)) * 4.0;\\\n    }\\\n    \\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      vec3 cmy = 1.0 - color.rgb;\\\n      float k = min(cmy.x, min(cmy.y, cmy.z));\\\n      cmy = (cmy - k) / (1.0 - k);\\\n      cmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\\\n      k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\\\n      gl_FragColor = vec4(1.0 - cmy - k, color.a);\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.colorHalftone, {\n    center: [centerX, centerY],\n    angle: angle,\n    scale: Math.PI / size,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/fun/colorhalftone.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter        Dot Screen\n * @description   Simulates a black and white halftone rendering of the image by multiplying\n *                pixel values with a rotated 2D sine wave pattern.\n * @param centerX The x coordinate of the pattern origin.\n * @param centerY The y coordinate of the pattern origin.\n * @param angle   The rotation of the pattern in radians.\n * @param size    The diameter of a dot in pixels.\n */\nexport default function(centerX, centerY, angle, size) {\n  var gl = store.get('gl')\n  gl.dotScreen = gl.dotScreen || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 center;\\\n    uniform float angle;\\\n    uniform float scale;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    float pattern() {\\\n      float s = sin(angle), c = cos(angle);\\\n      vec2 tex = texCoord * texSize - center;\\\n      vec2 point = vec2(\\\n        c * tex.x - s * tex.y,\\\n        s * tex.x + c * tex.y\\\n      ) * scale;\\\n      return (sin(point.x) * sin(point.y)) * 4.0;\\\n    }\\\n    \\\n    void main() {\\\n      vec4 color = texture2D(texture, texCoord);\\\n      float average = (color.r + color.g + color.b) / 3.0;\\\n      gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.dotScreen, {\n    center: [centerX, centerY],\n    angle: angle,\n    scale: Math.PI / size,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/fun/dotscreen.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport {randomShaderFunc} from '../common'\nimport * as store from '../../store'\n\n/**\n * @filter       Edge Work\n * @description  Picks out different frequencies in the image by subtracting two\n *               copies of the image blurred with different radii.\n * @param radius The radius of the effect in pixels.\n */\nexport default function(radius) {\n  var gl = store.get('gl')\n  gl.edgeWork1 = gl.edgeWork1 || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 delta;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    void main() {\\\n      vec2 color = vec2(0.0);\\\n      vec2 total = vec2(0.0);\\\n      \\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n      \\\n      for (float t = -30.0; t <= 30.0; t++) {\\\n        float percent = (t + offset - 0.5) / 30.0;\\\n        float weight = 1.0 - abs(percent);\\\n        vec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\\\n        float average = (sample.r + sample.g + sample.b) / 3.0;\\\n        color.x += average * weight;\\\n        total.x += weight;\\\n        if (abs(t) < 15.0) {\\\n          weight = weight * 2.0 - 1.0;\\\n          color.y += average * weight;\\\n          total.y += weight;\\\n        }\\\n      }\\\n      gl_FragColor = vec4(color / total, 0.0, 1.0);\\\n    }\\\n  ');\n  \n  gl.edgeWork2 = gl.edgeWork2 || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 delta;\\\n    varying vec2 texCoord;\\\n    ' + randomShaderFunc + '\\\n    void main() {\\\n      vec2 color = vec2(0.0);\\\n      vec2 total = vec2(0.0);\\\n      \\\n      /* randomize the lookup values to hide the fixed number of samples */\\\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n      \\\n      for (float t = -30.0; t <= 30.0; t++) {\\\n        float percent = (t + offset - 0.5) / 30.0;\\\n        float weight = 1.0 - abs(percent);\\\n        vec2 sample = texture2D(texture, texCoord + delta * percent).xy;\\\n        color.x += sample.x * weight;\\\n        total.x += weight;\\\n        if (abs(t) < 15.0) {\\\n          weight = weight * 2.0 - 1.0;\\\n          color.y += sample.y * weight;\\\n          total.y += weight;\\\n        }\\\n      }\\\n      float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\\\n      gl_FragColor = vec4(c, c, c, 1.0);\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.edgeWork1, {\n    delta: [radius / this.width, 0]\n  });\n  simpleShader.call(this, gl.edgeWork2, {\n    delta: [0, radius / this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/fun/edgework.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter        Hexagonal Pixelate\n * @description   Renders the image using a pattern of hexagonal tiles. Tile colors\n *                are nearest-neighbor sampled from the centers of the tiles.\n * @param centerX The x coordinate of the pattern center.\n * @param centerY The y coordinate of the pattern center.\n * @param scale   The width of an individual tile, in pixels.\n */\nexport default function(centerX, centerY, scale) {\n  var gl = store.get('gl')\n  gl.hexagonalPixelate = gl.hexagonalPixelate || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 center;\\\n    uniform float scale;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec2 tex = (texCoord * texSize - center) / scale;\\\n      tex.y /= 0.866025404;\\\n      tex.x -= tex.y * 0.5;\\\n      \\\n      vec2 a;\\\n      if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\\\n      else a = vec2(ceil(tex.x), ceil(tex.y));\\\n      vec2 b = vec2(ceil(tex.x), floor(tex.y));\\\n      vec2 c = vec2(floor(tex.x), ceil(tex.y));\\\n      \\\n      vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\\\n      vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\\\n      vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\\\n      vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\\\n      \\\n      float alen = length(TEX - A);\\\n      float blen = length(TEX - B);\\\n      float clen = length(TEX - C);\\\n      \\\n      vec2 choice;\\\n      if (alen < blen) {\\\n        if (alen < clen) choice = a;\\\n        else choice = c;\\\n      } else {\\\n        if (blen < clen) choice = b;\\\n        else choice = c;\\\n      }\\\n      \\\n      choice.x += choice.y * 0.5;\\\n      choice.y *= 0.866025404;\\\n      choice *= scale / texSize;\\\n      gl_FragColor = texture2D(texture, choice + center / texSize);\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.hexagonalPixelate, {\n    center: [centerX, centerY],\n    scale: scale,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/fun/hexagonalpixelate.js","import Shader from '../../shader'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Ink\n * @description    Simulates outlining the image in ink by darkening edges stronger than a\n *                 certain threshold. The edge detection value is the difference of two\n *                 copies of the image, each blurred using a blur of a different radius.\n * @param strength The multiplicative scale of the ink edges. Values in the range 0 to 1\n *                 are usually sufficient, where 0 doesn't change the image and 1 adds lots\n *                 of black edges. Negative strength values will create white ink edges\n *                 instead of black ones.\n */\nexport default function(strength) {\n  var gl = store.get('gl');\n  gl.ink = gl.ink || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform float strength;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n      vec2 dx = vec2(1.0 / texSize.x, 0.0);\\\n      vec2 dy = vec2(0.0, 1.0 / texSize.y);\\\n      vec4 color = texture2D(texture, texCoord);\\\n      float bigTotal = 0.0;\\\n      float smallTotal = 0.0;\\\n      vec3 bigAverage = vec3(0.0);\\\n      vec3 smallAverage = vec3(0.0);\\\n      for (float x = -2.0; x <= 2.0; x += 1.0) {\\\n        for (float y = -2.0; y <= 2.0; y += 1.0) {\\\n          vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\\\n          bigAverage += sample;\\\n          bigTotal += 1.0;\\\n          if (abs(x) + abs(y) < 2.0) {\\\n            smallAverage += sample;\\\n            smallTotal += 1.0;\\\n          }\\\n        }\\\n      }\\\n      vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\\\n      gl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\\\n    }\\\n  ');\n\n  simpleShader.call(this, gl.ink, {\n    strength: strength * strength * strength * strength * strength,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/fun/ink.js","import {warpShader} from '../common'\nimport {simpleShader, clamp} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter         Bulge / Pinch\n * @description    Bulges or pinches the image in a circle.\n * @param centerX  The x coordinate of the center of the circle of effect.\n * @param centerY  The y coordinate of the center of the circle of effect.\n * @param radius   The radius of the circle of effect.\n * @param strength -1 to 1 (-1 is strong pinch, 0 is no effect, 1 is strong bulge)\n */\nexport default function(centerX, centerY, radius, strength) {\n  var gl = store.get('gl')\n  gl.bulgePinch = gl.bulgePinch || warpShader('\\\n    uniform float radius;\\\n    uniform float strength;\\\n    uniform vec2 center;\\\n  ', '\\\n    coord -= center;\\\n    float distance = length(coord);\\\n    if (distance < radius) {\\\n      float percent = distance / radius;\\\n      if (strength > 0.0) {\\\n        coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\\\n      } else {\\\n        coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\\\n      }\\\n    }\\\n    coord += center;\\\n  ');\n\n  simpleShader.call(this, gl.bulgePinch, {\n    radius: radius,\n    strength: clamp(-1, strength, 1),\n    center: [centerX, centerY],\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/warp/bulgepinch.js","import {warpShader} from '../common'\nimport {getInverse} from '../../matrix'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter                Matrix Warp\n * @description           Transforms an image by a 2x2 or 3x3 matrix. The coordinates used in\n *                        the transformation are (x, y) for a 2x2 matrix or (x, y, 1) for a\n *                        3x3 matrix, where x and y are in units of pixels.\n * @param matrix          A 2x2 or 3x3 matrix represented as either a list or a list of lists.\n *                        For example, the 3x3 matrix [[2,0,0],[0,3,0],[0,0,1]] can also be\n *                        represented as [2,0,0,0,3,0,0,0,1] or just [2,0,0,3].\n * @param inverse         A boolean value that, when true, applies the inverse transformation\n *                        instead. (optional, defaults to false)\n * @param useTextureSpace A boolean value that, when true, uses texture-space coordinates\n *                        instead of screen-space coordinates. Texture-space coordinates range\n *                        from -1 to 1 instead of 0 to width - 1 or height - 1, and are easier\n *                        to use for simple operations like flipping and rotating.\n */\nexport default function(matrix, inverse, useTextureSpace) {\n  var gl = store.get('gl');\n  gl.matrixWarp = gl.matrixWarp || warpShader('\\\n    uniform mat3 matrix;\\\n    uniform bool useTextureSpace;\\\n  ', '\\\n    if (useTextureSpace) coord = coord / texSize * 2.0 - 1.0;\\\n    vec3 warp = matrix * vec3(coord, 1.0);\\\n    coord = warp.xy / warp.z;\\\n    if (useTextureSpace) coord = (coord * 0.5 + 0.5) * texSize;\\\n  ');\n\n  // Flatten all members of matrix into one big list\n  matrix = Array.prototype.concat.apply([], matrix);\n\n  // Extract a 3x3 matrix out of the arguments\n  if (matrix.length == 4) {\n    matrix = [\n      matrix[0], matrix[1], 0,\n      matrix[2], matrix[3], 0,\n      0, 0, 1\n    ];\n  } else if (matrix.length != 9) {\n    throw 'can only warp with 2x2 or 3x3 matrix';\n  }\n\n  simpleShader.call(this, gl.matrixWarp, {\n    matrix: inverse ? getInverse(matrix) : matrix,\n    texSize: [this.width, this.height],\n    useTextureSpace: useTextureSpace | 0\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/warp/matrixwarp.js","import {getSquareToQuad, multiply, getInverse} from '../../matrix'\n\n/**\n * @filter       Perspective\n * @description  Warps one quadrangle to another with a perspective transform. This can be used to\n *               make a 2D image look 3D or to recover a 2D image captured in a 3D environment.\n * @param before The x and y coordinates of four points before the transform in a flat list. This\n *               would look like [ax, ay, bx, by, cx, cy, dx, dy] for four points (ax, ay), (bx, by),\n *               (cx, cy), and (dx, dy).\n * @param after  The x and y coordinates of four points after the transform in a flat list, just\n *               like the other argument.\n */\nexport default function(before, after) {\n  var a = getSquareToQuad.apply(null, after);\n  var b = getSquareToQuad.apply(null, before);\n  var c = multiply(getInverse(a), b);\n  return this.matrixWarp(c);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/warp/perspective.js","import {warpShader} from '../common'\nimport {simpleShader} from '../../util'\nimport * as store from '../../store'\n\n/**\n * @filter        Swirl\n * @description   Warps a circular region of the image in a swirl.\n * @param centerX The x coordinate of the center of the circular region.\n * @param centerY The y coordinate of the center of the circular region.\n * @param radius  The radius of the circular region.\n * @param angle   The angle in radians that the pixels in the center of\n *                the circular region will be rotated by.\n */\nexport default function(centerX, centerY, radius, angle) {\n  var gl = store.get('gl');\n  gl.swirl = gl.swirl || warpShader('\\\n    uniform float radius;\\\n    uniform float angle;\\\n    uniform vec2 center;\\\n  ', '\\\n    coord -= center;\\\n    float distance = length(coord);\\\n    if (distance < radius) {\\\n      float percent = (radius - distance) / radius;\\\n      float theta = percent * percent * angle;\\\n      float s = sin(theta);\\\n      float c = cos(theta);\\\n      coord = vec2(\\\n        coord.x * c - coord.y * s,\\\n        coord.x * s + coord.y * c\\\n      );\\\n    }\\\n    coord += center;\\\n  ');\n\n  simpleShader.call(this, gl.swirl, {\n    radius: radius,\n    center: [centerX, centerY],\n    angle: angle,\n    texSize: [this.width, this.height]\n  });\n\n  return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/warp/swirl.js"],"sourceRoot":""}